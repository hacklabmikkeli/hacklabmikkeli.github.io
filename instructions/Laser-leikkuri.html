<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Laser-leikkuri</title>
    <meta name="description" content="Hacklab Mikkeli - Avoin ja yhteisöllinen työtila tieteestä, teknologiasta ja digitaalisesta taiteesta kiinnostuneille Mikkelissä &bull; An open and community-based workspace for people with interest in science, technology and digital arts in Mikkeli" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />
    
    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Hacklab Mikkeli" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Hacklab Mikkeli" />
    <meta property="og:description" content="Avoin ja yhteisöllinen työtila tieteestä, teknologiasta ja digitaalisesta taiteesta kiinnostuneille Mikkelissä &bull; An open and community-based workspace for people with interest in science, technology and digital arts in Mikkeli" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Hacklab Mikkeli" />
    <meta name="twitter:description" content="Avoin ja yhteisöllinen työtila tieteestä, teknologiasta ja digitaalisesta taiteesta kiinnostuneille Mikkelissä &bull; An open and community-based workspace for people with interest in science, technology and digital arts in Mikkeli" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "image": "/assets/images/cover1.jpg",
    "description": "Avoin ja yhteisöllinen työtila tieteestä, teknologiasta ja digitaalisesta taiteesta kiinnostuneille Mikkelissä &bull; An open and community-based workspace for people with interest in science, technology and digital arts in Mikkeli"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Hacklab Mikkeli" href="/rss.xml" />

</head>
<body class="page-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-events " role="presentation"><a href="/tag/event">Events</a></li>
        <li class="nav-projects " role="presentation"><a href="/tag/project">Projects</a></li>
        <li class="nav-instructions " role="presentation"><a href="/instructions">Instructions</a></li>
        <li class="nav-join"><a href="https://hacklabmikkeli.yhdistysavain.fi/liity-jaseneksi/" >Hae jäsenyyttä &bull; Apply for membership</a></li>
        <li class="nav-for-members"><a href="https://hacklabmikkeli.yhdistysavain.fi/jasensivut/" >Jäsenille &bull; For members</a></li>
        <li class="nav-gh role="presentation"><a href="https://github.com/hacklabmikkeli">Github</a></li>
        <li class="nav-twitter role="presentation"><a href="https://twitter.com/HacklabMikkeli">Twitter</a></li>
        <li class="nav-fb role="presentation"><a href=" https://facebook.com/hacklabmikkeli">Facebook</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- This is a page template. A page outputs content just like any other post, and has all the same -->
    <!-- attributes by default, but you can also customise it to behave differently if you prefer.  -->

<!-- Everything inside the #post tags pulls data from the page -->
<!-- #post -->

<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/alien_pink.svg" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
            
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post">
        <!-- Everything inside the #post tags pulls data from the post -->

        <header class="post-header">
            <h1 class="post-title">Laser-leikkuri</h1>
        </header>

        <section class="post-content">
            <p><em>(Documentation written by Vaasa Hacklab, https://vaasa.hacklab.fi/)</em></p>

<p>25 W CO<sub>2</sub> tube laser cutter with a working area of 70 mm by 120 mm capable of cutting paper, cardboard, acrylic up to 6 mm and wood and plywood (~ 4 mm).</p>

<p><strong>Preparations</strong></p>

<ul>
<li><strong>You need to have qualification for the cutter</strong>, ask someone for help</span></li>
<li>Make sure the cooling water is flowing and there is enough of it</li>
<li>Make sure the fume exhaust is routed outside (might be at the IT-rack every now and then)</li>
<li>Make sure you are not cutting material that is on the list of forbidden materials. (PVC, carbon fibre, ..)</li>
<li>Do not look at the invisible laser as it is not good for you – use the camera</li>
</ul>

<p><strong>Other notes</strong></p>

<ul>
<li>Disable laser by popping up the “Enable laser” button when ever the cover is open.</li>
<li>Enable laser only when you are cutting</li>
<li>When mounting and dismounting the workpiece from the spring loaded tray squeeze the spring and do not move the carriage. Do not pull only the handle as it will result in carriage pulleys to break eventually</li>
</ul>

<h2>CUPS Printing to Laser Engraver</h2>

<p>Laser engraver is equipped with printing server and is announced in LAN as a network printer <strong>Laser on Engrave</strong> and <strong>LaserNoRot on Engrave</strong>. The print server is the “broken” laptop on top of the laser engraver. The display is connected to that and does automatically on start up start the server and show the image from the camera on the screen. The laptop boots on power on e.g. when the laser main switch is turned on from the extension cord.</p>

<p>Engrave (https://10.10.0.21:631/printers/Laser)</p>

<p>If the laptop for some reason does not boot the original power button is on top of the laptop on a separate circuit board. The button is the one furthest away from the joining connector. The power led is blue.</p>

<p>When the system is up and running you can print Generic Postscript to the laser. Known to work is Microsoft Publisher (imaging) driver.</p>

<p>Tulostettaessa kaivertimelle kannattaa ilmeisesti käyttää custom-paperikokoa ja määritellä kooksi 120 x 70mm.</p>

<p>Ainakin Inkscapen kanssa on hieman ongelmia, kun Inkscape havaitsee paperin olevan leveämpi kuin korkea ja määrittelee paperin Landscapeksi. Tulostaessa tuo sitten kääntyy 90 astetta. Tällä hetkellä ongelma on korjattu tulostinpalvelimelta kiertämällä kuvaa vielä 270 astetta lisää. Tuo vaatii vielä lisää perehtymistä, koska lienee jossain määrin ohjelma- tai käyttöjärjestelmäkohtaista.</p>

<p>Tuloste osuu parin millin tarkkuudella työstöalueelle tällä hetkellä.</p>

<p>Tulostettavien tiedostojen on oltava viivamuotoisia vektoritiedostoja. Tekstit eivät tulostu, ellei niitä ole ensin muunnettu poluiksi (Object to path).</p>

<p>Jos alat tulostamaan etänä jotain infernaalista kuten testisivua, etkä saa tulostustoimintaa loppumaan, niin loggaa roottina sisään ja tapa prosessi: <code>cat /tmp/plot-xxxxxxxx.hpgl2</code></p>

<h2>CUPS-säätö</h2>

<p>Tulostuspalvelimella postscript-tiedosto käsitellään <code>/usr/lib/cups/backend/plot</code> -skriptillä, joka tällä hetkellä kääntää kuvan, kohdistaa kuvan ja muuntaa ps:n hpgl-komennoiksi.</p>

<h2>Ongelmanratkaisua</h2>

<p><em>Kaiverrin junnaa nurkassa pienellä alueella</em></p>

<p>Mikäli tulostus tuntuu muuten toimivan hyvin, mutta kaiverrin liikuttaa työstökappaletta ainoastaan muutaman millin liikealueella jossain nurkassa ja kuvittelee kaivertavansa ihan oikein on tulostimelle mennyt out of range eli siis työstöalueen ulkopuolisiin koordinaatteihin viittaava hpgl-tiedosto.</p>

<ul>
<li>Työasemassa määritelty paperikoko väärin. Parhaiten toimii custom kokoisella 120mm * 70mm paperilla, joka on samalla työstöalueen koko</li>
<li>Työaseman ps-tulostinajuri ei tarjoa plot-skriptin tarjoamaa postscriptiä, kokeile vaihtoehtoista ps-ajuria</li>
</ul>

<p>Periaatteessa kaiverruspalvelimen asetuksissakin voi olla jotain vialla, mutta tuo ei varsinaisesti sisällä mitään säädettäviä muuttujia.</p>

<h2>Tulostus komentoriviltä</h2>

<p>Kun olet lisännyt tulostimen koneeseen (onnistuu ihan kivasti normityökaluilla), voit tulostaa mitä tahansa kaivertimelle sanomalla:</p>

<p><code>lpr -H 192.168.42.33 -P Laser tiedosto.hpgl</code></p>

<h2>Plot-skript and other hacks</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">#!/bin/bash
#
# /usr/lib/cups/backend/plot
#
# (c) D. Czechowski 2010
#
# Based on email dated June 2003 to printing.cups.devel
# (c) Kurt Pfeifle, Danka Deutschland GmbH
# [ this is not really a copyright ; - ) Use and modify freely as you like,
# but don&#39;t complain to me...]
#
# 2012 kengu
# mods for 5wlaser


JOBID=$1
USER=$2
TITLE=$3
COPIES=$4
OPTIONS=$5
PID=$$
FILE=$6

# if there are no arguments: print the accepted URI
if [ $# -eq 0 ]; then
echo &quot;direct plot &quot;Unknown&quot; &quot;Send print job as HPGL to port specified in device-
URI&quot;&quot;
exit 0
fi
# in case of wrong number of arguments: print usage hint
if [ $# -ne 5 -a $# -ne 6 ]; then
echo &quot;&quot;
echo &quot;Usage: plot job-id user title copies options [file]&quot;
echo &quot; example for device-URI: &#39;plot:/dev/port&#39;&quot;
echo &quot;(this converts the printfile to HPGL then sends outputs it to specified device file)&quot;
echo &quot;&quot;
echo &quot;Install a printqueue with &#39;lpadmin -p -v plot:/ -E&quot;
echo &quot;&quot;
exit 1
fi

# get location of plotter port from device URI
# establish temp file for converting
PLOTTER=${DEVICE_URI#plot:}
TMPFILE=&quot;/tmp/plot-&quot;`date +%Y%m%d%H%M%S`

# but check &quot;accepting&quot; status first...
GREPSTRING=&quot;not accepting&quot; ;
if lpstat -a $PLOTTER | grep &quot;$GREPSTRING&quot; &amp;&gt; /dev/null ; then
echo &quot;ERROR: printer $PLOTTER not accepting jobs&quot;
exit 1
fi

# check temp file status second...
GREPSTRING=&quot;not accepting&quot; ;
if lpstat -a $TMPFILE | grep &quot;$GREPSTRING&quot; &amp;&gt; /dev/null ; then
echo &quot;ERROR: printer $TMPFILE not accepting jobs&quot;
exit 1
fi

# output the postscript data
cat $FILE &gt; $TMPFILE&quot;.ps&quot;

#sed -e &#39;s/Orientation: Landscape/Orientation: Portrait/&#39; $TMPFILE&quot;.ps2&quot; | sed -e &#39;s/ViewingOrientation: 0 1 -1 0/ViewingOrientation: 1 0 0 1/&#39; &gt; $TMPFILE&quot;.ps&quot;

# convert postscript file to hpgl and distill it

/usr/bin/pstoedit -rotate 270 -xshift -250 -yshift 30 -xscale 1.42 -yscale 1.42 -f &quot;hpgl&quot; $TMPFILE&quot;.ps&quot; $TMPFILE&quot;.hpgl&quot;
#/usr/bin/pstoedit -f hpgl $TMPFILE&quot;.ps&quot; $TMPFILE&quot;.hpgl&quot;
/usr/local/bin/hpgl-distiller -i $TMPFILE&quot;.hpgl&quot; -o $TMPFILE&quot;.hpgl2&quot;

# output HPGL file
echo &quot;VS1&quot; &gt; $PLOTTER
cat $TMPFILE&quot;.hpgl2&quot; &gt; $PLOTTER

# remove temp files
#rm $TMPFILE&quot;.ps&quot; $TMPFILE&quot;.hpgl&quot; $TMPFILE&quot;.hpgl2&quot;

exit 0
/etc/cups/printers.conf:

# Printer configuration file for CUPS v1.4.4
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
&lt;Printer Laser&gt;
Info Laser
MakeModel Foo 5w Laserkaiverrin, 1.0
DeviceURI plot:/dev/lp0
State Idle
StateTime 1353803245
Type 8392772
Filter application/vnd.cups-raw 0 -
Filter application/vnd.cups-command 0 commandtops
Filter application/vnd.cups-postscript 0 -
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy stop-printer
&lt;/Printer&gt;
</code></pre></div>
<p>:octocat:</p>

        </section>

    </article>

</main>
<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Hacklab Mikkeli</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-59054179-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
